<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Plot Diagnostics for the Transaction data in a clv.data Object — plot.clv.data • CLVTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Plot Diagnostics for the Transaction data in a clv.data Object — plot.clv.data"><meta property="og:description" content="Depending on the value of parameter which, one of the following plots will be produced.
Note that the sample parameter determines the period for which the
selected plot is made (either estimation, holdout, or full).

Tracking Plot
Plot the aggregated repeat transactions per period over the given time-horizon (prediction.end).
See Details for the definition of plotting periods.



Frequency Plot
Plot the distribution of transactions or repeat transactions per customer, after aggregating transactions
of the same customer on a single time point.
Note that if trans.bins is changed, label.remaining usually needs to be adapted as well.



Spending Plot
Plot the empirical density of either customer's average spending per transaction or the value
of every transaction in the data, after aggregating transactions of the same customer on a single time point.
Note that in all cases this includes all transactions and not only repeat-transactions.



Interpurchase Time Plot
Plot the empirical density of customer's mean time (in number of periods) between transactions,
after aggregating transactions of the same customer on a single time point.
Note that customers without repeat-transactions are removed.



Transaction Timing Plot
Plot the transaction timings of selected or sampled customers on their respective timelines.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-31477052-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-31477052-2');
</script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CLVTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.12.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/CLVTools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bachmannpatrick/CLVTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot Diagnostics for the Transaction data in a clv.data Object</h1>
    <small class="dont-index">Source: <a href="https://github.com/bachmannpatrick/CLVTools/blob/master/R/f_s3generics_clvdata_plot.R" class="external-link"><code>R/f_s3generics_clvdata_plot.R</code></a></small>
    <div class="hidden name"><code>plot.clv.data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Depending on the value of parameter <code>which</code>, one of the following plots will be produced.
Note that the <code>sample</code> parameter determines the period for which the
selected plot is made (either estimation, holdout, or full).</p>
<div class="section">
<h3 id="tracking-plot">Tracking Plot<a class="anchor" aria-label="anchor" href="#tracking-plot"></a></h3>
<p>Plot the aggregated repeat transactions per period over the given time-horizon (<code>prediction.end</code>).
See Details for the definition of plotting periods.</p>
</div>

<div class="section">
<h3 id="frequency-plot">Frequency Plot<a class="anchor" aria-label="anchor" href="#frequency-plot"></a></h3>
<p>Plot the distribution of transactions or repeat transactions per customer, after aggregating transactions
of the same customer on a single time point.
Note that if <code>trans.bins</code> is changed, <code>label.remaining</code> usually needs to be adapted as well.</p>
</div>

<div class="section">
<h3 id="spending-plot">Spending Plot<a class="anchor" aria-label="anchor" href="#spending-plot"></a></h3>
<p>Plot the empirical density of either customer's average spending per transaction or the value
of every transaction in the data, after aggregating transactions of the same customer on a single time point.
Note that in all cases this includes all transactions and not only repeat-transactions.</p>
</div>

<div class="section">
<h3 id="interpurchase-time-plot">Interpurchase Time Plot<a class="anchor" aria-label="anchor" href="#interpurchase-time-plot"></a></h3>
<p>Plot the empirical density of customer's mean time (in number of periods) between transactions,
after aggregating transactions of the same customer on a single time point.
Note that customers without repeat-transactions are removed.</p>
</div>

<div class="section">
<h3 id="transaction-timing-plot">Transaction Timing Plot<a class="anchor" aria-label="anchor" href="#transaction-timing-plot"></a></h3>
<p>Plot the transaction timings of selected or sampled customers on their respective timelines.</p>
</div>

    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'clv.data'</span></span>
<span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  which <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tracking"</span>, <span class="st">"frequency"</span>, <span class="st">"spending"</span>, <span class="st">"interpurchasetime"</span>, <span class="st">"timings"</span><span class="op">)</span>,</span>
<span>  prediction.end <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cumulative <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trans.bins <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">9</span>,</span>
<span>  count.repeat.trans <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  count.remaining <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  label.remaining <span class="op">=</span> <span class="st">"10+"</span>,</span>
<span>  mean.spending <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  annotate.ids <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"estimation"</span>, <span class="st">"full"</span>, <span class="st">"holdout"</span><span class="op">)</span>,</span>
<span>  geom <span class="op">=</span> <span class="st">"line"</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>The clv.data object to plot</p></dd>


<dt id="arg-which">which<a class="anchor" aria-label="anchor" href="#arg-which"></a></dt>
<dd><p>Which plot to produce, either "tracking", "frequency", "spending", "interpurchasetime", or "timings".
May be abbreviated but only one may be selected. Defaults to "tracking".</p></dd>


<dt id="arg-prediction-end">prediction.end<a class="anchor" aria-label="anchor" href="#arg-prediction-end"></a></dt>
<dd><p>"tracking": Until what point in time to plot. This can be the number of periods (numeric) or a form of date/time object. See details.</p></dd>


<dt id="arg-cumulative">cumulative<a class="anchor" aria-label="anchor" href="#arg-cumulative"></a></dt>
<dd><p>"tracking": Whether the cumulative actual repeat transactions should be plotted.</p></dd>


<dt id="arg-trans-bins">trans.bins<a class="anchor" aria-label="anchor" href="#arg-trans-bins"></a></dt>
<dd><p>"frequency": Vector of integers indicating the number of transactions (x axis) for which the customers should be counted.</p></dd>


<dt id="arg-count-repeat-trans">count.repeat.trans<a class="anchor" aria-label="anchor" href="#arg-count-repeat-trans"></a></dt>
<dd><p>"frequency": Whether repeat transactions (TRUE, default) or all transactions (FALSE) should be counted.</p></dd>


<dt id="arg-count-remaining">count.remaining<a class="anchor" aria-label="anchor" href="#arg-count-remaining"></a></dt>
<dd><p>"frequency": Whether the customers which are not captured with <code>trans.bins</code> should be counted in a separate last bar.</p></dd>


<dt id="arg-label-remaining">label.remaining<a class="anchor" aria-label="anchor" href="#arg-label-remaining"></a></dt>
<dd><p>"frequency": Label for the last bar, if <code>count.remaining=TRUE</code>.</p></dd>


<dt id="arg-mean-spending">mean.spending<a class="anchor" aria-label="anchor" href="#arg-mean-spending"></a></dt>
<dd><p>"spending": Whether customer's mean spending per transaction (<code>TRUE</code>, default) or the
value of every transaction in the data (<code>FALSE</code>) should be plotted.</p></dd>


<dt id="arg-annotate-ids">annotate.ids<a class="anchor" aria-label="anchor" href="#arg-annotate-ids"></a></dt>
<dd><p>"timings": Whether timelines should be annotated with customer ids.</p></dd>


<dt id="arg-ids">ids<a class="anchor" aria-label="anchor" href="#arg-ids"></a></dt>
<dd><p>"timings": A character vector of customer ids or a single integer specifying the number of customers to sample.
Defaults to <code>NULL</code> for which 50 random customers are selected.</p></dd>


<dt id="arg-sample">sample<a class="anchor" aria-label="anchor" href="#arg-sample"></a></dt>
<dd><p>Name of the sample for which the plot should be made, either
"estimation", "full", or "holdout". Defaults to "estimation". Not for "tracking" and "timing".</p></dd>


<dt id="arg-geom">geom<a class="anchor" aria-label="anchor" href="#arg-geom"></a></dt>
<dd><p>"spending" and "interpurchasetime": The geometric object of ggplot2 to display the data. Forwarded to
<a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">ggplot2::stat_density</a>.</p></dd>


<dt id="arg-color">color<a class="anchor" aria-label="anchor" href="#arg-color"></a></dt>
<dd><p>Color of resulting geom object in the plot. Not for "tracking" and "timing".</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Whether a plot should be created or only the assembled data returned.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Show details about the running of the function.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Forwarded to <a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">ggplot2::stat_density</a> ("spending", "interpurchasetime")
or <a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">ggplot2::geom_bar</a> ("frequency"). Not for "tracking" and "timings".</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class <code>ggplot</code> from package <code>ggplot2</code> is returned by default.
If <code>plot=FALSE</code>, the data that would have been used to create the plot is returned.
Depending on which plot was selected, this is a <code>data.table</code>
which contains some of the following columns:</p>
<dl><dt>Id</dt>
<dd><p>Customer Id</p></dd>

<dt>period.until</dt>
<dd><p>The timepoint that marks the end (up until and including) of the period to which the data in this row refers.</p></dd>

<dt>Spending</dt>
<dd><p>Spending as defined by parameter <code>mean.spending</code>.</p></dd>

<dt>mean.interpurchase.time</dt>
<dd><p>Mean number of periods between transactions per customer,
excluding customers with no repeat-transactions.</p></dd>

<dt>num.transactions</dt>
<dd><p>The number of (repeat) transactions, depending on <code>count.repeat.trans</code>.</p></dd>

<dt>num.customers</dt>
<dd><p>The number of customers.</p></dd>

<dt>type</dt>
<dd><p>"timings": Which purpose the value in this row is used for.</p></dd>

<dt>variable</dt>
<dd><p>"tracking": The number of actual repeat transactions in the period that ends at <code>period.until</code>.<br>
                "timings": Coordinate (x or y) for which to use the value in this row for.</p></dd>

<dt>value</dt>
<dd><p>"timings":  Date or numeric (stored as string) <br>
             "tracking": numeric, may be <code>NA</code> if no repeat-transactions were recorded in this period</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>prediction.end</code> indicates until when to predict or plot and can be given as either
a point in time (of class <code>Date</code>, <code>POSIXct</code>, or <code>character</code>) or the number of periods.
If <code>prediction.end</code> is of class character, the date/time format set when creating the data object is used for parsing.
If <code>prediction.end</code> is the number of periods, the end of the fitting period serves as the reference point
from which periods are counted. Only full periods may be specified.
If <code>prediction.end</code> is omitted or NULL, it defaults to the end of the holdout period if present and to the
end of the estimation period otherwise.</p>
<p>The first prediction period is defined to start right after the end of the estimation period.
If for example weekly time units are used and the estimation period ends on Sunday 2019-01-01, then the first day
of the first prediction period is Monday 2019-01-02. Each prediction period includes a total of 7 days and
the first prediction period therefore will end on, and include, Sunday 2019-01-08. Subsequent prediction periods
again start on Mondays and end on Sundays.
If <code>prediction.end</code> indicates a timepoint on which to end, this timepoint is included in the prediction period.</p>
<p>If there are no repeat transactions until <code>prediction.end</code>, only the time for which there is data
is plotted. If the data is returned (i.e. with argument <code>plot=FALSE</code>), the respective rows
contain <code>NA</code> in column <code>Number of Repeat Transactions</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">ggplot2::stat_density</a> and <a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">ggplot2::geom_bar</a>
for possible arguments to <code>...</code></p>
<p><a href="plot.clv.fitted.transactions.html">plot</a> to plot fitted transaction models</p>
<p><a href="plot.clv.fitted.spending.html">plot</a> to plot fitted spending models</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cdnow"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">clv.cdnow</span> <span class="op">&lt;-</span> <span class="fu"><a href="clvdata.html">clvdata</a></span><span class="op">(</span><span class="va">cdnow</span>, time.unit<span class="op">=</span><span class="st">"w"</span>,estimation.split<span class="op">=</span><span class="fl">37</span>,</span></span>
<span class="r-in"><span>                     date.format<span class="op">=</span><span class="st">"ymd"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### TRACKING PLOT</span></span></span>
<span class="r-in"><span><span class="co"># Plot the actual repeat transactions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting from 1997-01-01 until 1998-07-05.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>A <span style="color: #0000BB;">&lt;numeric&gt;</span> value was passed to a <span style="color: #00BB00;">Date</span> scale.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The value was converted to a &lt;Date&gt; object.</span>
<span class="r-plt img"><img src="plot.clv.data-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># same, explicitly</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"tracking"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting from 1997-01-01 until 1998-07-05.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>A <span style="color: #0000BB;">&lt;numeric&gt;</span> value was passed to a <span style="color: #00BB00;">Date</span> scale.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The value was converted to a &lt;Date&gt; object.</span>
<span class="r-plt img"><img src="plot.clv.data-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot cumulative repeat transactions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, cumulative<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting from 1997-01-01 until 1998-07-05.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>A <span style="color: #0000BB;">&lt;numeric&gt;</span> value was passed to a <span style="color: #00BB00;">Date</span> scale.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The value was converted to a &lt;Date&gt; object.</span>
<span class="r-plt img"><img src="plot.clv.data-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Dont automatically plot but tweak further</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># for ggtitle()</span></span></span>
<span class="r-in"><span><span class="va">gg.cdnow</span> <span class="op">&lt;-</span> <span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting from 1997-01-01 until 1998-07-05.</span>
<span class="r-in"><span><span class="co"># change Title</span></span></span>
<span class="r-in"><span><span class="va">gg.cdnow</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"CDnow repeat transactions"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>A <span style="color: #0000BB;">&lt;numeric&gt;</span> value was passed to a <span style="color: #00BB00;">Date</span> scale.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The value was converted to a &lt;Date&gt; object.</span>
<span class="r-plt img"><img src="plot.clv.data-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Dont return a plot but only the data from</span></span></span>
<span class="r-in"><span><span class="co">#   which it would have been created</span></span></span>
<span class="r-in"><span><span class="va">dt.plot.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, plot<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting from 1997-01-01 until 1998-07-05.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### FREQUENCY PLOT</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"frequency"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bins from 0 to 15, all remaining in bin labelled "16+"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"frequency"</span>, trans.bins<span class="op">=</span><span class="fl">0</span><span class="op">:</span><span class="fl">15</span>,</span></span>
<span class="r-in"><span>     label.remaining<span class="op">=</span><span class="st">"16+"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Count all transactions, not only repeat</span></span></span>
<span class="r-in"><span><span class="co">#  Note that the bins have to be adapted to start from 1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"frequency"</span>, count.repeat.trans <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>     trans.bins<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### SPENDING DENSITY</span></span></span>
<span class="r-in"><span><span class="co"># plot customer's average transaction value</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"spending"</span>, mean.spending <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># distribution of the values of every transaction</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"spending"</span>, mean.spending <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### INTERPURCHASE TIME DENSITY</span></span></span>
<span class="r-in"><span><span class="co"># plot as small points, in blue</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"interpurchasetime"</span>,</span></span>
<span class="r-in"><span>     geom<span class="op">=</span><span class="st">"point"</span>, color<span class="op">=</span><span class="st">"blue"</span>, size<span class="op">=</span><span class="fl">0.02</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-10.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### TIMING PATTERNS</span></span></span>
<span class="r-in"><span><span class="co"># selected customers and annotating them</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"timings"</span>, ids<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"123"</span>, <span class="st">"1041"</span><span class="op">)</span>, annotate.ids<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-11.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot 25 random customers</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"timings"</span>, ids<span class="op">=</span><span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-12.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot all customers</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.clv.fitted.transactions.html">plot</a></span><span class="op">(</span><span class="va">clv.cdnow</span>, which<span class="op">=</span><span class="st">"timings"</span>, ids<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/nobs.html" class="external-link">nobs</a></span><span class="op">(</span><span class="va">clv.cdnow</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.clv.data-13.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Bachmann, Niels Kuebler, Markus Meierer, Jeffrey Naef, E. Shin Oblander, Patrik Schilter.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

