<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predict CLV from a fitted model — predict.clv.fitted • CLVTools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Predict CLV from a fitted model — predict.clv.fitted" />
<meta property="og:description" content="Probabilistic customer attrition models predict in general three expected characteristics for every customer:
&quot;conditional expected transactions&quot; (CET), which is the number of transactions to expect form a customer
during the prediction period,
&quot;probability of a customer being alive&quot; (PAlive) at the end of the estimation period and
&quot;discounted expected residual transactions&quot; (DERT) for every customer, which is the total number of
transactions for the residual lifetime of a customer discounted to the end of the estimation period.
In the case of time-varying covariates, instead of DERT, &quot;discounted expected conditional transactions&quot; (DECT)
is predicted. DECT does only cover a finite time horizon in contrast to DERT. For continuous.discount.factor=0, DECT corresponds to CET.
If spending information was provided in the clvdata object, by default a Gamma/Gamma model is fitted
to predict spending and calculate the predicted CLV. In this case, the prediction additionally contains the following two columns:
predicted spending estimated by a Gamma/Gamma model
the customer lifetime value (CLV).

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CLVTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/CLVTools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/internal_docu/internal_docu.html">Internal Package Documentation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bachmannpatrick/CLVTools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict CLV from a fitted model</h1>
    <small class="dont-index">Source: <a href='https://github.com/bachmannpatrick/CLVTools/blob/master/R/clv_template_controlflow_predict.R'><code>R/clv_template_controlflow_predict.R</code></a></small>
    <div class="hidden name"><code>predict.clv.fitted.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Probabilistic customer attrition models predict in general three expected characteristics for every customer:</p><ul>
<li><p>"conditional expected transactions" (<code>CET</code>), which is the number of transactions to expect form a customer
during the prediction period,</p></li>
<li><p>"probability of a customer being alive" (<code>PAlive</code>) at the end of the estimation period and</p></li>
<li><p>"discounted expected residual transactions" (<code>DERT</code>) for every customer, which is the total number of
transactions for the residual lifetime of a customer discounted to the end of the estimation period.
In the case of time-varying covariates, instead of <code>DERT</code>, "discounted expected conditional transactions" (<code>DECT</code>)
is predicted. <code>DECT</code> does only cover a finite time horizon in contrast to <code>DERT</code>. For <code>continuous.discount.factor=0</code>, <code>DECT</code> corresponds to <code>CET</code>.</p></li>
</ul><p>If spending information was provided in the <code>clvdata</code> object, by default a Gamma/Gamma model is fitted
to predict spending and calculate the predicted CLV. In this case, the prediction additionally contains the following two columns:</p><ul>
<li><p>predicted spending estimated by a Gamma/Gamma model</p></li>
<li><p>the customer lifetime value (CLV).</p></li>
</ul>

    </div>

    <pre class="usage"><span class='co'># S3 method for clv.fitted</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(
  <span class='no'>object</span>,
  <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>prediction.end</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>predict.spending</span> <span class='kw'>=</span> <span class='fu'>clv.data.has.spending</span>(<span class='no'>object</span>@<span class='kw'>clv.data</span>),
  <span class='kw'>continuous.discount.factor</span> <span class='kw'>=</span> <span class='fl'>0.1</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>
)

<span class='co'># S4 method for clv.fitted</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(
  <span class='no'>object</span>,
  <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>prediction.end</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>predict.spending</span> <span class='kw'>=</span> <span class='fu'>clv.data.has.spending</span>(<span class='no'>object</span>@<span class='kw'>clv.data</span>),
  <span class='kw'>continuous.discount.factor</span> <span class='kw'>=</span> <span class='fl'>0.1</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A fitted clv model for which prediction is desired.</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>A clv data object for which predictions should be made with the fitted model. If none or NULL is given, predictions are made for the data on which the model was fit.</p></td>
    </tr>
    <tr>
      <th>prediction.end</th>
      <td><p>Until what point in time to predict. This can be the number of periods (numeric) or a form of date/time object. See details.</p></td>
    </tr>
    <tr>
      <th>predict.spending</th>
      <td><p>Whether the spending and CLV should be calculated and reported additionally. Only possible if the transaction data contains spending information.</p></td>
    </tr>
    <tr>
      <th>continuous.discount.factor</th>
      <td><p>continuous discount factor to use</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Show details about the running of the function.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Ignored</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>data.table</code> with each columns containing the predictions:</p>
<dt>Id</dt><dd><p>The respective customer identifier</p></dd>
<dt>period.first</dt><dd><p>First timepoint of prediction period</p></dd>
<dt>period.last</dt><dd><p>Last timepoint of prediction period</p></dd>
<dt>period.length</dt><dd><p>Number of time units covered by the period indicated by <code>period.first</code> and <code>period.last</code> (including both ends).</p></dd>
<dt>PAlive</dt><dd><p>Probability to be alive at the end of the estimation period</p></dd>
<dt>CET</dt><dd><p>The Conditional Expected Transactions</p></dd>
<dt>DERT or DECT</dt><dd><p>Discounted Expected Residual Transactions or Discounted Expected Conditional Transactions for dynamic covariates models</p></dd>
<dt>actual.x</dt><dd><p>Actual number of transactions until prediction.end. Only if there is a holdout period and the prediction ends in it.</p></dd>
<dt>actual.Spending</dt><dd><p>Actual spending until prediction.end. Only if there is a holdout period and the prediction ends in it, 0 otherwise.</p></dd>
<dt>predicted.Spending</dt><dd><p>The spending as predicted by the Gamma-Gamma model.</p></dd>
<dt>predicted.CLV</dt><dd><p>Customer Lifetime Value based on DERT and predicted spending.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>newdata</code> argument has to be a clv data object of the exact same class as the data object
on which the model was fit. In case the model was fit with covariates, <code>newdata</code> needs to contain identically
named covariate data.</p>
<p>The use case for <code>newdata</code> is mainly two-fold: First, to estimate model parameters only on a
sample of the data and then use the fitted model object to predict or plot for the full data set provided through <code>newdata</code>.
Second, for models with dynamic covariates, to provide a clv data object with longer covariates than contained in the data
on which the model was estimated what allows to predict or plot further. When providing <code>newdata</code>, some models
might require additional steps that can significantly increase runtime.</p>
<p><code>prediction.end</code> indicates until when to predict or plot and can be given as either
a point in time (of class <code>Date</code>, <code>POSIXct</code>, or <code>character</code>) or the number of periods.
If <code>prediction.end</code> is of class character, the date/time format set when creating the data object is used for parsing.
If <code>prediction.end</code> is the number of periods, the end of the fitting period serves as the reference point
from which periods are counted. Only full periods may be specified.
If <code>prediction.end</code> is omitted or NULL, it defaults to the end of the holdout period if present and to the
end of the estimation period otherwise.</p>
<p>The first prediction period is defined to start right after the end of the estimation period.
If for example weekly time units are used and the estimation period ends on Sunday 2019-01-01, then the first day
of the first prediction period is Monday 2019-01-02. Each prediction period includes a total of 7 days and
the first prediction period therefore will end on, and include, Sunday 2019-01-08. Subsequent prediction periods
again start on Mondays and end on Sundays.
If <code>prediction.end</code> indicates a timepoint on which to end, this timepoint is included in the prediction period.</p>
<p><code>predict.spending</code> uses a Gamma/Gamma model to predict customer spending. This option is only available
if customer spending information was provided when the data object was created.</p>
<p><code>continuous.discount.factor</code> allows to adjust the discount rate used to estimated the discounted expected
transactions (<code>DERT</code>).
The default value is <code>0.1</code> (=10%). Note that a continuous rate needs to be provided.</p>

<h3>The Gamma-Gamma model to Predict Spending</h3>
<p>Most probabilistic latent customer attrition model capture future customer
behavior as a combination of the customer's purchase and attrition process.
However, in order to derive a monetary value such as CLV, customer spending
also has to be considered. To model customer spending the Gamma/Gamma is a
popular choice.</p>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Schmittlein DC, Morrison DG, Colombo R (1987). “Counting Your Customers:
Who-Are They and What Will They Do Next?” Management Science, 33(1), 1–24.</p>
<p>Fader PS, Hardie BGS (2005). “A Note on Deriving the Pareto/NBD Model and
Related Expressions.”
URL <a href='http://www.brucehardie.com/notes/009/pareto_nbd_derivations_2005-11-05.pdf'>http://www.brucehardie.com/notes/009/pareto_nbd_derivations_2005-11-05.pdf</a>.</p>
<p>Fader PS, Hardie BG (2007). "Incorporating time-invariant covariates into the
Pareto/NBD and BG/NBD models."
URL <a href='http://www.brucehardie.com/notes/019/time_invariant_covariates.pdf'>http://www.brucehardie.com/notes/019/time_invariant_covariates.pdf</a>.</p>
<p>Colombo R, Jiang W (1999). "A stochastic RFM model."
Journal of Interactive Marketing, 13(3), 2–12.</p>
<p>Fader PS, Hardie BG, Lee K (2005). "RFM and CLV: Using Iso-Value Curves for Customer Base Analysis."
Journal of Marketing Research, 42(4), 415–430.</p>
<p>Fader PS, Hardie BG (2013). "The Gamma-Gamma Model of Monetary Value."
URL <a href='http://www.brucehardie.com/notes/025/gamma_gamma.pdf'>http://www.brucehardie.com/notes/025/gamma_gamma.pdf</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># \donttest{</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"apparelTrans"</span>)
<span class='co'># Fit pnbd standard model on data, WITH holdout</span>
<span class='no'>pnc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='pnbd.html'>pnbd</a></span>(<span class='fu'><a href='clvdata.html'>clvdata</a></span>(<span class='no'>apparelTrans</span>, <span class='kw'>time.unit</span><span class='kw'>=</span><span class='st'>"w"</span>,
                    <span class='kw'>estimation.split</span><span class='kw'>=</span><span class='fl'>37</span>, <span class='kw'>date.format</span><span class='kw'>=</span><span class='st'>"ymd"</span>))</div><div class='output co'>#&gt; <span class='message'>Starting estimation...</span></div><div class='output co'>#&gt; <span class='message'>Estimation finished!</span></div><div class='input'>
<span class='co'># Predict until the end of the holdout period</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>pnc</span>)</div><div class='output co'>#&gt; <span class='message'>Predicting from 2005-09-20 until (incl.) 2006-07-16 (42.86 Weeks).</span></div><div class='output co'>#&gt;        Id period.first period.last period.length actual.x actual.spending
#&gt;   1:    1   2005-09-20  2006-07-16      42.85714        0            0.00
#&gt;   2:   10   2005-09-20  2006-07-16      42.85714        0            0.00
#&gt;   3:  100   2005-09-20  2006-07-16      42.85714       23         5086.44
#&gt;   4: 1000   2005-09-20  2006-07-16      42.85714       25         4280.24
#&gt;   5: 1001   2005-09-20  2006-07-16      42.85714       11         2914.10
#&gt;  ---                                                                     
#&gt; 246: 1219   2005-09-20  2006-07-16      42.85714       14         3233.78
#&gt; 247:  122   2005-09-20  2006-07-16      42.85714        0            0.00
#&gt; 248: 1220   2005-09-20  2006-07-16      42.85714        0            0.00
#&gt; 249: 1221   2005-09-20  2006-07-16      42.85714        9         1322.94
#&gt; 250: 1222   2005-09-20  2006-07-16      42.85714        0            0.00
#&gt;         PAlive        CET       DERT predicted.Spending predicted.CLV
#&gt;   1: 0.3909486  0.2695175 0.06742966           219.0261      14.76885
#&gt;   2: 0.4683655  1.1455545 0.28660241           208.7025      59.81465
#&gt;   3: 0.9858260 16.2637166 4.06896420           185.2896     753.93666
#&gt;   4: 0.9948489 12.9177435 3.23184652           167.9019     542.63310
#&gt;   5: 0.6492975  5.0094874 1.25330669           234.5086     293.91118
#&gt;  ---                                                                 
#&gt; 246: 0.9859140  4.1431240 1.03655417           204.8505     212.33860
#&gt; 247: 0.3909486  0.2695175 0.06742966           219.0261      14.76885
#&gt; 248: 0.3909486  0.2695175 0.06742966           219.0261      14.76885
#&gt; 249: 0.9762841  4.9600594 1.24094046           206.1343     255.80034
#&gt; 250: 0.4471943  0.7010328 0.17538901           207.6214      36.41452</div><div class='input'>
<span class='co'># Predict until 10 periods (weeks in this case) after</span>
<span class='co'>#   the end of the 37 weeks fitting period</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>pnc</span>, <span class='kw'>prediction.end</span> <span class='kw'>=</span> <span class='fl'>10</span>) <span class='co'># ends on 2010-11-28</span></div><div class='output co'>#&gt; <span class='message'>Predicting from 2005-09-20 until (incl.) 2005-11-28 (10 Weeks).</span></div><div class='output co'>#&gt;        Id period.first period.last period.length actual.x actual.spending
#&gt;   1:    1   2005-09-20  2005-11-28            10        0            0.00
#&gt;   2:   10   2005-09-20  2005-11-28            10        0            0.00
#&gt;   3:  100   2005-09-20  2005-11-28            10        6          632.52
#&gt;   4: 1000   2005-09-20  2005-11-28            10        9         1422.00
#&gt;   5: 1001   2005-09-20  2005-11-28            10        3         1029.55
#&gt;  ---                                                                     
#&gt; 246: 1219   2005-09-20  2005-11-28            10        3          216.58
#&gt; 247:  122   2005-09-20  2005-11-28            10        0            0.00
#&gt; 248: 1220   2005-09-20  2005-11-28            10        0            0.00
#&gt; 249: 1221   2005-09-20  2005-11-28            10        4          557.08
#&gt; 250: 1222   2005-09-20  2005-11-28            10        0            0.00
#&gt;         PAlive        CET       DERT predicted.Spending predicted.CLV
#&gt;   1: 0.3909486 0.06948064 0.06742966           219.0261      14.76885
#&gt;   2: 0.4683655 0.29531988 0.28660241           208.7025      59.81465
#&gt;   3: 0.9858260 4.19272818 4.06896420           185.2896     753.93666
#&gt;   4: 0.9948489 3.33014824 3.23184652           167.9019     542.63310
#&gt;   5: 0.6492975 1.29142799 1.25330669           234.5086     293.91118
#&gt;  ---                                                                 
#&gt; 246: 0.9859140 1.06808261 1.03655417           204.8505     212.33860
#&gt; 247: 0.3909486 0.06948064 0.06742966           219.0261      14.76885
#&gt; 248: 0.3909486 0.06948064 0.06742966           219.0261      14.76885
#&gt; 249: 0.9762841 1.27868563 1.24094046           206.1343     255.80034
#&gt; 250: 0.4471943 0.18072375 0.17538901           207.6214      36.41452</div><div class='input'>
<span class='co'># Predict until 31th Dec 2016 with the timepoint as a character</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>pnc</span>, <span class='kw'>prediction.end</span> <span class='kw'>=</span> <span class='st'>"2016-12-31"</span>)</div><div class='output co'>#&gt; <span class='message'>Predicting from 2005-09-20 until (incl.) 2016-12-31 (588.71 Weeks).</span></div><div class='output co'>#&gt;        Id period.first period.last period.length    PAlive        CET
#&gt;   1:    1   2005-09-20  2016-12-31      588.7143 0.3909486   2.095890
#&gt;   2:   10   2005-09-20  2016-12-31      588.7143 0.4683655   8.908351
#&gt;   3:  100   2005-09-20  2016-12-31      588.7143 0.9858260 126.474033
#&gt;   4: 1000   2005-09-20  2016-12-31      588.7143 0.9948489 100.454230
#&gt;   5: 1001   2005-09-20  2016-12-31      588.7143 0.6492975  38.956045
#&gt;  ---                                                                 
#&gt; 246: 1219   2005-09-20  2016-12-31      588.7143 0.9859140  32.218811
#&gt; 247:  122   2005-09-20  2016-12-31      588.7143 0.3909486   2.095890
#&gt; 248: 1220   2005-09-20  2016-12-31      588.7143 0.3909486   2.095890
#&gt; 249: 1221   2005-09-20  2016-12-31      588.7143 0.9762841  38.571670
#&gt; 250: 1222   2005-09-20  2016-12-31      588.7143 0.4471943   5.451549
#&gt;            DERT predicted.Spending predicted.CLV
#&gt;   1: 0.06742966           219.0261      14.76885
#&gt;   2: 0.28660241           208.7025      59.81465
#&gt;   3: 4.06896420           185.2896     753.93666
#&gt;   4: 3.23184652           167.9019     542.63310
#&gt;   5: 1.25330669           234.5086     293.91118
#&gt;  ---                                            
#&gt; 246: 1.03655417           204.8505     212.33860
#&gt; 247: 0.06742966           219.0261      14.76885
#&gt; 248: 0.06742966           219.0261      14.76885
#&gt; 249: 1.24094046           206.1343     255.80034
#&gt; 250: 0.17538901           207.6214      36.41452</div><div class='input'>
<span class='co'># Predict until 31th Dec 2016 with the timepoint as a Date</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>pnc</span>, <span class='kw'>prediction.end</span> <span class='kw'>=</span> <span class='kw pkg'>lubridate</span><span class='kw ns'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/ymd.html'>ymd</a></span>(<span class='st'>"2016-12-31"</span>))</div><div class='output co'>#&gt; <span class='message'>Predicting from 2005-09-20 until (incl.) 2016-12-31 (588.71 Weeks).</span></div><div class='output co'>#&gt;        Id period.first period.last period.length    PAlive        CET
#&gt;   1:    1   2005-09-20  2016-12-31      588.7143 0.3909486   2.095890
#&gt;   2:   10   2005-09-20  2016-12-31      588.7143 0.4683655   8.908351
#&gt;   3:  100   2005-09-20  2016-12-31      588.7143 0.9858260 126.474033
#&gt;   4: 1000   2005-09-20  2016-12-31      588.7143 0.9948489 100.454230
#&gt;   5: 1001   2005-09-20  2016-12-31      588.7143 0.6492975  38.956045
#&gt;  ---                                                                 
#&gt; 246: 1219   2005-09-20  2016-12-31      588.7143 0.9859140  32.218811
#&gt; 247:  122   2005-09-20  2016-12-31      588.7143 0.3909486   2.095890
#&gt; 248: 1220   2005-09-20  2016-12-31      588.7143 0.3909486   2.095890
#&gt; 249: 1221   2005-09-20  2016-12-31      588.7143 0.9762841  38.571670
#&gt; 250: 1222   2005-09-20  2016-12-31      588.7143 0.4471943   5.451549
#&gt;            DERT predicted.Spending predicted.CLV
#&gt;   1: 0.06742966           219.0261      14.76885
#&gt;   2: 0.28660241           208.7025      59.81465
#&gt;   3: 4.06896420           185.2896     753.93666
#&gt;   4: 3.23184652           167.9019     542.63310
#&gt;   5: 1.25330669           234.5086     293.91118
#&gt;  ---                                            
#&gt; 246: 1.03655417           204.8505     212.33860
#&gt; 247: 0.06742966           219.0261      14.76885
#&gt; 248: 0.06742966           219.0261      14.76885
#&gt; 249: 1.24094046           206.1343     255.80034
#&gt; 250: 0.17538901           207.6214      36.41452</div><div class='input'>

<span class='co'># Fit pnbd standard model WITHOUT holdout</span>
<span class='no'>pnc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='pnbd.html'>pnbd</a></span>(<span class='fu'><a href='clvdata.html'>clvdata</a></span>(<span class='no'>apparelTrans</span>, <span class='kw'>time.unit</span><span class='kw'>=</span><span class='st'>"w"</span>, <span class='kw'>date.format</span><span class='kw'>=</span><span class='st'>"ymd"</span>))</div><div class='output co'>#&gt; <span class='message'>Starting estimation...</span></div><div class='output co'>#&gt; <span class='message'>Estimation finished!</span></div><div class='input'>
<span class='co'># This fails, because without holdout, a prediction.end is required</span>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>pnc</span>)
}

<span class='co'># Now, predict 10 periods from the end of the last transaction</span>
<span class='co'>#   (end of estimation period)</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>pnc</span>, <span class='kw'>prediction.end</span> <span class='kw'>=</span> <span class='fl'>10</span>) <span class='co'># ends on 2016-12-17</span></div><div class='output co'>#&gt; <span class='message'>Predicting from 2006-07-16 until (incl.) 2006-09-24 (10 Weeks).</span></div><div class='output co'>#&gt;        Id period.first period.last period.length     PAlive        CET
#&gt;   1:    1   2006-07-16  2006-09-24            10 0.19161789 0.01673191
#&gt;   2:   10   2006-07-16  2006-09-24            10 0.07059577 0.02243071
#&gt;   3:  100   2006-07-16  2006-09-24            10 0.99543304 4.78886271
#&gt;   4: 1000   2006-07-16  2006-09-24            10 0.99921311 4.57681399
#&gt;   5: 1001   2006-07-16  2006-09-24            10 0.92653166 2.10903146
#&gt;  ---                                                                  
#&gt; 246: 1219   2006-07-16  2006-09-24            10 0.80935629 1.74906523
#&gt; 247:  122   2006-07-16  2006-09-24            10 0.19161789 0.01673191
#&gt; 248: 1220   2006-07-16  2006-09-24            10 0.19161789 0.01673191
#&gt; 249: 1221   2006-07-16  2006-09-24            10 0.88300093 1.50130158
#&gt; 250: 1222   2006-07-16  2006-09-24            10 0.12410715 0.02513502
#&gt;            DERT predicted.Spending predicted.CLV
#&gt;   1: 0.01636545           220.4315      3.607462
#&gt;   2: 0.02193944           216.1576      4.742378
#&gt;   3: 4.68397971           206.0929    965.335142
#&gt;   4: 4.47657517           186.1292    833.221222
#&gt;   5: 2.06284063           233.9810    482.665482
#&gt;  ---                                            
#&gt; 246: 1.71075818           216.8827    371.033786
#&gt; 247: 0.01636545           220.4315      3.607462
#&gt; 248: 0.01636545           220.4315      3.607462
#&gt; 249: 1.46842091           204.4750    300.255303
#&gt; 250: 0.02458453           215.8908      5.307575</div><div class='input'>
# }

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Patrick Bachmann, Jeffrey Naef, Patrik Schilter, Markus Meierer, Niels Kuebler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


