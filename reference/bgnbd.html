<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>BG/NBD models — bgnbd • CLVTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="BG/NBD models — bgnbd"><meta property="og:description" content="Fits BG/NBD models on transactional data without and with static covariates."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-31477052-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-31477052-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CLVTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/CLVTools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/internal_docu/internal_docu.html">Internal Package Documentation</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bachmannpatrick/CLVTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>BG/NBD models</h1>
    <small class="dont-index">Source: <a href="https://github.com/bachmannpatrick/CLVTools/blob/master/R/f_interface_bgnbd.R" class="external-link"><code>R/f_interface_bgnbd.R</code></a></small>
    <div class="hidden name"><code>bgnbd.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fits BG/NBD models on transactional data without and with static covariates.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class="sourceCode r"><code><span class="co"># S4 method for clv.data</span>
<span class="fu">bgnbd</span><span class="op">(</span>
  <span class="va">clv.data</span>,
  start.params.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  optimx.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="co"># S4 method for clv.data.static.covariates</span>
<span class="fu">bgnbd</span><span class="op">(</span>
  <span class="va">clv.data</span>,
  start.params.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  optimx.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>,
  names.cov.life <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  names.cov.trans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  start.params.life <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  start.params.trans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  names.cov.constr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  start.params.constr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  reg.lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>

    <div id="ref-sections">
    <div id="arguments">
    <h2>Arguments</h2>
    

<dl><dt>clv.data</dt><dd><p>The data object on which the model is fitted.</p></dd>
</dl><dl><dt>start.params.model</dt><dd><p>Named start parameters containing the optimization start parameters for the model without covariates.</p></dd>
</dl><dl><dt>optimx.args</dt><dd><p>Additional arguments to control the optimization which are forwarded to <code><a href="https://rdrr.io/pkg/optimx/man/optimx.html" class="external-link">optimx::optimx</a></code>.
If multiple optimization methods are specified, only the result of the last method is further processed.</p></dd>
</dl><dl><dt>verbose</dt><dd><p>Show details about the running of the function.</p></dd>
</dl><dl><dt>...</dt><dd><p>Ignored</p></dd>
</dl><dl><dt>names.cov.life</dt><dd><p>Which of the set Lifetime covariates should be used. Missing parameter indicates all covariates shall be used.</p></dd>
</dl><dl><dt>names.cov.trans</dt><dd><p>Which of the set Transaction covariates should be used. Missing parameter indicates all covariates shall be used.</p></dd>
</dl><dl><dt>start.params.life</dt><dd><p>Named start parameters containing the optimization start parameters for all lifetime covariates.</p></dd>
</dl><dl><dt>start.params.trans</dt><dd><p>Named start parameters containing the optimization start parameters for all transaction covariates.</p></dd>
</dl><dl><dt>names.cov.constr</dt><dd><p>Which covariates should be forced to use the same parameters for the lifetime and transaction process. The covariates need to be present as both, lifetime and transaction covariates.</p></dd>
</dl><dl><dt>start.params.constr</dt><dd><p>Named start parameters containing the optimization start parameters for the constraint covariates.</p></dd>
</dl><dl><dt>reg.lambdas</dt><dd><p>Named lambda parameters used for the L2 regularization of the lifetime and the transaction covariate parameters. Lambdas have to be &gt;= 0.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Depending on the data object on which the model was fit, <code>bgnbd</code> returns either an object of
class <a href="clv.bgnbd-class.html">clv.bgnbd</a> or <a href="clv.bgnbd.static.cov-class.html">clv.bgnbd.static.cov</a>.</p>
<p>The function <code><a href="summary.clv.fitted.html">summary</a></code> can be used to obtain and print a summary of the results.
The generic accessor functions <code>coefficients</code>, <code><a href="vcov.clv.fitted.html">vcov</a></code>, <code><a href="fitted.clv.fitted.html">fitted</a></code>,
<code>logLik</code>, <code>AIC</code>, <code>BIC</code>, and <code>nobs</code> are available.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Model parameters for the BG/NBD model are <code>r, alpha, a, and b</code>. <br><code>r</code>: shape parameter of the Gamma distribution of the purchase process. <br><code>alpha</code>: scale parameter of the Gamma distribution of the purchase process. <br><code>a</code>: shape parameter of the Beta distribution of the dropout process.<br><code>b</code>: shape parameter of the Beta distribution of the dropout process.</p>
<p>If no start parameters are given, r = 1, alpha = 3, a = 1, b = 3 is used.
All model start parameters are required to be &gt; 0. If no start values are given for the
covariate parameters, 0.1 is used.</p>
<p>Note that the DERT expression has not been derived (yet) and it consequently is not possible to calculated
values for DERT and CLV.</p>


<div class="section">
<h3 id="the-bg-nbd-model">The BG/NBD model<a class="anchor" aria-label="anchor" href="#the-bg-nbd-model"></a></h3>
<p>The BG/NBD is an "easy" alternative to the Pareto/NBD model that is easier to implement. The BG/NBD model slight adapts
the behavioral "story" associated with the Pareto/NBD model in order to simplify the implementation. The BG/NBD model uses a beta-geometric and
exponential gamma mixture distributions to model customer behavior. The key difference to the Pareto/NBD model is that a customer can only
churn right after a transaction. This simplifies computations significantly, however has the drawback that a customer cannot churn until he/she
makes a transaction. The Pareto/NBD model assumes that a customer can churn at any time.</p>
</div>

<div class="section">
<h3 id="bg-nbd-model-with-static-covariates">BG/NBD model with static covariates<a class="anchor" aria-label="anchor" href="#bg-nbd-model-with-static-covariates"></a></h3>
<p>The standard BG/NBD model captures heterogeneity was solely using Gamma distributions.
However, often exogenous knowledge, such as for example customer demographics, is available.
The supplementary knowledge may explain part of the heterogeneity among the customers and
therefore increase the predictive accuracy of the model. In addition, we can rely on these
parameter estimates for inference, i.e. identify and quantify effects of contextual factors
on the two underlying purchase and attrition processes. For technical details we refer to
the technical note by Fader and Hardie (2007).</p>
<p>The likelihood function is the likelihood function associated with the basic model where
alpha, a, and b are replaced with alpha = alpha0*exp(-g1z1), a = a_0*exp(g2z2), and b = b0*exp(g3z2)
while r remains unchanged. Note that in the current implementation, we constrain the covariate parameters
and data for the lifetime process to be equal (g2=g3 and z2=z3).</p>
</div>

    </div>
    <div id="references">
    <h2>References</h2>
    <p>Fader PS, Hardie BGS, Lee, KL (2005). ““Counting Your Customers” the Easy Way:
An Alternative to the Pareto/NBD Model” Marketing Science, 24(2), 275–284.</p>
<p>Fader PS, Hardie BGS (2013). “Overcoming the BG/NBD Model’s #NUM! Error Problem”
URL <a href="http://brucehardie.com/notes/027/bgnbd_num_error.pdf" class="external-link">http://brucehardie.com/notes/027/bgnbd_num_error.pdf</a>.</p>
<p>Fader PS, Hardie BGS (2007). “Incorporating time-invariant covariates into the
Pareto/NBD and BG/NBD models.”
URL <a href="http://www.brucehardie.com/notes/019/time_invariant_covariates.pdf" class="external-link">http://www.brucehardie.com/notes/019/time_invariant_covariates.pdf</a>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="clvdata.html">clvdata</a></code> to create a clv data object, <code><a href="SetStaticCovariates.html">SetStaticCovariates</a></code>
to add static covariates to an existing clv data object.</p>
<p><code><a href="predict.clv.fitted.transactions.html">predict</a></code> to predict expected transactions, probability of being alive, and customer lifetime value for every customer</p>
<p><code><a href="plot.clv.fitted.transactions.html">plot</a></code> to plot the unconditional expectation as predicted by the fitted model</p>
<p>The generic functions <code><a href="vcov.clv.fitted.html">vcov</a></code>, <code><a href="summary.clv.fitted.html">summary</a></code>, <code><a href="fitted.clv.fitted.html">fitted</a></code>.</p></div>
    </div>
    </div>

    <div id="examples">
    <h2>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"apparelTrans"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">clv.data.apparel</span> <span class="op">&lt;-</span> <span class="fu"><a href="clvdata.html">clvdata</a></span><span class="op">(</span><span class="va">apparelTrans</span>, date.format <span class="op">=</span> <span class="st">"ymd"</span>,</span>
<span class="r-in">                            time.unit <span class="op">=</span> <span class="st">"w"</span>, estimation.split <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Fit standard bgnbd model</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.apparel</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD Standard Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.apparel)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      r   alpha       a       b  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.4837  3.2825  0.3760  4.2874  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: TRUE </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Give initial guesses for the model parameters</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.apparel</span>,</span>
<span class="r-in">     start.params.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>r<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">15</span>, a <span class="op">=</span> <span class="fl">2</span>, b<span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD Standard Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.apparel, start.params.model = c(r = 0.5, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     alpha = 15, a = 2, b = 5))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      r   alpha       a       b  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.4837  3.2823  0.3755  4.2785  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: TRUE </span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># pass additional parameters to the optimizer (optimx)</span></span>
<span class="r-in"><span class="co">#    Use Nelder-Mead as optimization method and print</span></span>
<span class="r-in"><span class="co">#    detailed information about the optimization process</span></span>
<span class="r-in"><span class="va">apparel.bgnbd</span> <span class="op">&lt;-</span> <span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.apparel</span>,</span>
<span class="r-in">                     optimx.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"Nelder-Mead"</span>,</span>
<span class="r-in">                                        control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trace<span class="op">=</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> fn is  fn </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Looking for method =  Nelder-Mead </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Methods to be used:[1] "Nelder-Mead"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Function has  4  arguments</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analytic gradient not made available.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analytic Hessian not made available.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Scale check -- log parameter ratio= 0   log bounds ratio= NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> optcfg:$fname</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "fn"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $npar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$follow.on</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$save.failures</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$trace</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$kkt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$all.methods</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$starttests</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$maximize</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$dowarn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$usenumDeriv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$kkttol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$kkt2tol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1e-06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$badval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 8.988466e+307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$scaletol</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ctrl$have.bounds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $usenumDeriv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ufn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (LL.params, LL.param.names.to.optimx, LL.function.sum, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     use.interlayer.constr, use.interlayer.reg, reg.lambda.trans, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reg.lambda.life, use.cor, ...) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     all.other.args &lt;- list(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     names(LL.params) &lt;- LL.param.names.to.optimx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     interlayers.to.use &lt;- list(callLL = interlayer_callLL)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (use.cor == T &amp; !anyNA(use.cor)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         interlayers.to.use &lt;- c(correlation = interlayer_correlation, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             interlayers.to.use)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (use.interlayer.reg == T &amp; !is.null(reg.lambda.trans) &amp; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         !anyNA(reg.lambda.trans) &amp; !is.null(reg.lambda.life) &amp; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         !anyNA(reg.lambda.life)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         interlayers.to.use &lt;- c(regularization = interlayer_regularization, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             interlayers.to.use)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (use.interlayer.constr == TRUE) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         interlayers.to.use &lt;- c(constraints = interlayer_constraints, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             interlayers.to.use)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     interlayer.call.args &lt;- list(next.interlayers = interlayers.to.use, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         LL.function.sum = LL.function.sum, LL.params = LL.params, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         reg.lambda.life = reg.lambda.life, reg.lambda.trans = reg.lambda.trans)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     interlayer.call.args &lt;- modifyList(interlayer.call.args, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         all.other.args)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     return(do.call(what = interlayer_callnextinterlayer, args = interlayer.call.args))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x7fb6c9901580&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: namespace:CLVTools&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $have.bounds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $method</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Nelder-Mead"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method:  Nelder-Mead </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Nelder-Mead direct search function minimizer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function value for initial parameters = 2985.769409</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Scaled convergence tolerance is 4.44914e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stepsize computed as 0.109861</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BUILD              5 3012.752572 2973.973439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION          7 2993.373011 2943.829057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION       9 2985.769409 2943.829057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         11 2981.542423 2924.136709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      13 2973.973439 2924.136709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         15 2948.255070 2905.355668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      17 2943.829057 2905.355668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      19 2924.512075 2905.355668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION        21 2924.136709 2903.722832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      23 2914.417772 2903.722832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      25 2910.432354 2903.722832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         27 2906.938793 2900.310876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      29 2905.762406 2900.310876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         31 2905.355668 2897.983732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         33 2903.963391 2892.824039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      35 2903.722832 2892.824039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      37 2900.310876 2892.824039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         39 2897.983732 2888.407512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         41 2895.428656 2886.461459</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         43 2894.728449 2885.167328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      45 2892.824039 2885.167328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      47 2888.407512 2884.465033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      49 2886.461459 2884.465033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      51 2885.358936 2884.465033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      53 2885.167328 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      55 2884.621344 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      57 2884.533026 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      59 2884.471900 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      61 2884.465033 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      63 2884.307960 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      65 2884.294155 2884.241545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      67 2884.260398 2884.232491</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      69 2884.251403 2884.227891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION        71 2884.242641 2884.214209</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      73 2884.241545 2884.214209</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      75 2884.232491 2884.214209</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      77 2884.227891 2884.214209</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION        79 2884.222247 2884.211910</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      81 2884.219542 2884.211910</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION        83 2884.216543 2884.208206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION      85 2884.214209 2884.208206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION        87 2884.212109 2884.207571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION        89 2884.211910 2884.204090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      91 2884.209897 2884.204090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION         93 2884.208206 2884.196287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      95 2884.207571 2884.196287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      97 2884.205801 2884.196287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION      99 2884.204090 2884.196287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        101 2884.200845 2884.187823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     103 2884.200017 2884.187823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     105 2884.197901 2884.187823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     107 2884.196287 2884.187823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        109 2884.194098 2884.185217</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       111 2884.192371 2884.184869</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        113 2884.190371 2884.181057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       115 2884.187823 2884.179468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     117 2884.185217 2884.179468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     119 2884.184869 2884.179468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     121 2884.182670 2884.179271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        123 2884.181057 2884.174673</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     125 2884.180099 2884.174673</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        127 2884.179468 2884.170098</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     129 2884.179271 2884.170098</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        131 2884.176628 2884.166480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        133 2884.174673 2884.161706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        135 2884.170454 2884.149121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     137 2884.170098 2884.149121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     139 2884.166480 2884.149121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        141 2884.161706 2884.134374</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     143 2884.157294 2884.134374</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        145 2884.155098 2884.116203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        147 2884.149121 2884.090693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     149 2884.141857 2884.090693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        151 2884.134374 2884.069820</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        153 2884.116203 2883.997578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     155 2884.093568 2883.997578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        157 2884.090693 2883.921060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     159 2884.069820 2883.921060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        161 2884.001430 2883.768134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     163 2883.997578 2883.768134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        165 2883.931248 2883.604649</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     167 2883.921060 2883.604649</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        169 2883.788867 2883.342194</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     171 2883.768134 2883.342194</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        173 2883.611557 2883.264365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     175 2883.604649 2883.264365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     177 2883.366603 2883.236876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     179 2883.342194 2883.236876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     181 2883.266722 2883.236876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     183 2883.264365 2883.235914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     185 2883.253315 2883.235914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     187 2883.250570 2883.231901</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       189 2883.238972 2883.223324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     191 2883.236876 2883.223324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       193 2883.235914 2883.222976</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     195 2883.231901 2883.222976</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       197 2883.230575 2883.219943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       199 2883.226230 2883.216983</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       201 2883.223324 2883.215562</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     203 2883.222976 2883.215562</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       205 2883.219943 2883.213091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        207 2883.216983 2883.209451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     209 2883.216054 2883.209451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     211 2883.215562 2883.209451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       213 2883.213091 2883.209182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       215 2883.210682 2883.206047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     217 2883.210389 2883.206047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     219 2883.209451 2883.206047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        221 2883.209182 2883.204351</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        223 2883.206824 2883.201442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        225 2883.206198 2883.197598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        227 2883.206047 2883.194732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     229 2883.204351 2883.194732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        231 2883.201442 2883.184381</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        233 2883.197598 2883.179577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     235 2883.196262 2883.179577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        237 2883.194732 2883.163859</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        239 2883.186089 2883.155529</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     241 2883.184381 2883.155529</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     243 2883.179577 2883.155529</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       245 2883.163859 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     247 2883.157131 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     249 2883.156818 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     251 2883.155529 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     253 2883.152542 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     255 2883.151799 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     257 2883.151213 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     259 2883.150774 2883.149003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        261 2883.149429 2883.146832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     263 2883.149373 2883.146832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        265 2883.149111 2883.146446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       267 2883.149003 2883.145823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        269 2883.147235 2883.142518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     271 2883.146832 2883.142518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     273 2883.146446 2883.142518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     275 2883.145823 2883.142518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        277 2883.144279 2883.140196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        279 2883.143353 2883.139006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        281 2883.143184 2883.136671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     283 2883.142518 2883.136671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     285 2883.140196 2883.136671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     287 2883.139143 2883.136671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     289 2883.139006 2883.136671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     291 2883.138430 2883.136671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        293 2883.137091 2883.135142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     295 2883.137055 2883.135142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     297 2883.136876 2883.135142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     299 2883.136671 2883.135142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     301 2883.136256 2883.135142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        303 2883.135331 2883.134309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXTENSION        305 2883.135314 2883.134212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REFLECTION       307 2883.135160 2883.133997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     309 2883.135142 2883.133997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     311 2883.134309 2883.133919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     313 2883.134212 2883.133912</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     315 2883.134091 2883.133912</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     317 2883.133997 2883.133899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     319 2883.133938 2883.133888</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LO-REDUCTION     321 2883.133919 2883.133864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HI-REDUCTION     323 2883.133912 2883.133862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exiting from Nelder Mead minimizer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     325 function evaluations used</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Post processing for method  Nelder-Mead </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Successful convergence! </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compute Hessian approximation at finish of  Nelder-Mead </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compute gradient approximation at finish of  Nelder-Mead </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Save results from method  Nelder-Mead </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $par</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      log.r  log.alpha      log.a      log.b </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.7265353  1.1885279 -0.9792292  1.4542322 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2883.134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $message</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convcode</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fevals</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      325 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $gevals</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> gradient </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nitns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $kkt1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $kkt2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xtimes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> user.self </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     0.113 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Assemble the answers</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># estimated coefs</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">apparel.bgnbd</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         r     alpha         a         b </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.4835815 3.2822459 0.3756005 4.2811953 </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># summary of the fitted model</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">apparel.bgnbd</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD Standard  Model </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.apparel, optimx.args = list(method = "Nelder-Mead", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     control = list(trace = 6)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fitting period:                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimation start  2005-01-03   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimation end    2005-10-10   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimation length 40.0000 Weeks</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Estimate Std. Error z-val Pr(&gt;|z|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r      0.48358    0.05366 9.012  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alpha  3.28225    0.51360 6.391 1.65e-10 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a      0.37560    0.18360 2.046   0.0408 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b      4.28120    2.92789 1.462   0.1437    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimization info:                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LL     -2883.1339 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AIC    5774.2677  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BIC    5788.3536  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT 1  TRUE       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT 2  TRUE       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> fevals 325.0000   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method Nelder-Mead</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># predict CLV etc for holdout period</span></span>
<span class="r-in"><span class="fu"><a href="predict.clv.fitted.transactions.html">predict</a></span><span class="op">(</span><span class="va">apparel.bgnbd</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Predicting from 2005-10-11 until (incl.) 2006-07-16 (39.86 Weeks).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimating gg model to predict spending...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Id period.first period.last period.length actual.x actual.total.spending</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:    1   2005-10-11  2006-07-16      39.85714        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:   10   2005-10-11  2006-07-16      39.85714        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:  100   2005-10-11  2006-07-16      39.85714       23                737.53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4: 1000   2005-10-11  2006-07-16      39.85714       23               1069.91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5: 1001   2005-10-11  2006-07-16      39.85714       11                364.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246: 1219   2005-10-11  2006-07-16      39.85714       14                413.76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247:  122   2005-10-11  2006-07-16      39.85714        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 248: 1220   2005-10-11  2006-07-16      39.85714        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 249: 1221   2005-10-11  2006-07-16      39.85714        9                302.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 250: 1222   2005-10-11  2006-07-16      39.85714        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      predicted.mean.spending        CET    PAlive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:                39.95483  0.4243615 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:                55.23031  1.1842170 0.5589646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:                43.57390 13.4903936 0.8918495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:                41.60921 13.2073200 0.9775625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:                45.58153  3.5970526 0.5114537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246:                33.58728  3.4747558 0.9215830</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247:                39.95483  0.4243615 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 248:                39.95483  0.4243615 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 249:                34.28958  4.1928882 0.9135946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 250:                47.35500  0.7949918 0.6210671</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># predict CLV etc for the next 15 periods</span></span>
<span class="r-in"><span class="fu"><a href="predict.clv.fitted.transactions.html">predict</a></span><span class="op">(</span><span class="va">apparel.bgnbd</span>, prediction.end <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Predicting from 2005-10-11 until (incl.) 2006-01-23 (15 Weeks).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimating gg model to predict spending...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Id period.first period.last period.length actual.x actual.total.spending</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:    1   2005-10-11  2006-01-23            15        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:   10   2005-10-11  2006-01-23            15        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:  100   2005-10-11  2006-01-23            15       10                224.71</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4: 1000   2005-10-11  2006-01-23            15       10                343.11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5: 1001   2005-10-11  2006-01-23            15        6                206.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246: 1219   2005-10-11  2006-01-23            15       11                325.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247:  122   2005-10-11  2006-01-23            15        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 248: 1220   2005-10-11  2006-01-23            15        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 249: 1221   2005-10-11  2006-01-23            15        7                158.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 250: 1222   2005-10-11  2006-01-23            15        0                  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      predicted.mean.spending       CET    PAlive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:                39.95483 0.1643356 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:                55.23031 0.4660760 0.5589646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:                43.57390 5.4306174 0.8918495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:                41.60921 5.3123540 0.9775625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:                45.58153 1.4381151 0.5114537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246:                33.58728 1.3784751 0.9215830</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247:                39.95483 0.1643356 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 248:                39.95483 0.1643356 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 249:                34.28958 1.6677149 0.9135946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 250:                47.35500 0.3108782 0.6210671</span>
<span class="r-in"><span class="co"># }</span></span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="co"># To estimate the bgnbd model with static covariates,</span></span>
<span class="r-in"><span class="co">#   add static covariates to the data</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"apparelStaticCov"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">clv.data.static.cov</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="fu"><a href="SetStaticCovariates.html">SetStaticCovariates</a></span><span class="op">(</span><span class="va">clv.data.apparel</span>,</span>
<span class="r-in">                     data.cov.life <span class="op">=</span> <span class="va">apparelStaticCov</span>,</span>
<span class="r-in">                     names.cov.life <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gender"</span>, <span class="st">"Channel"</span><span class="op">)</span>,</span>
<span class="r-in">                     data.cov.trans <span class="op">=</span> <span class="va">apparelStaticCov</span>,</span>
<span class="r-in">                     names.cov.trans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gender"</span>, <span class="st">"Channel"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Fit bgnbd with static covariates</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.static.cov</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD with Static Covariates Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.static.cov)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             r          alpha              a              b    life.Gender  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0.6388        19.4162       112.3599      1494.7095        -6.2899  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  life.Channel   trans.Gender  trans.Channel  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1.1070         1.3655         0.6995  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constraints:     FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regularization:  FALSE </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Give initial guesses for both covariate parameters</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.static.cov</span>, start.params.trans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Gender<span class="op">=</span><span class="fl">0.75</span>, Channel<span class="op">=</span><span class="fl">0.7</span><span class="op">)</span>,</span>
<span class="r-in">                   start.params.life  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Gender<span class="op">=</span><span class="fl">0.5</span>, Channel<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD with Static Covariates Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.static.cov, start.params.life = c(Gender = 0.5, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Channel = 0.5), start.params.trans = c(Gender = 0.75, Channel = 0.7))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             r          alpha              a              b    life.Gender  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0.6393        19.4913         2.1251        28.2174        -2.3357  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  life.Channel   trans.Gender  trans.Channel  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1.1016         1.3642         0.6993  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constraints:     FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regularization:  FALSE </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Use regularization</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.static.cov</span>, reg.lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="fl">5</span>, life<span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD with Static Covariates Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.static.cov, reg.lambdas = c(trans = 5, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     life = 5))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             r          alpha              a              b    life.Gender  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     0.4851703      3.3321229      0.3904548      4.5376573     -0.0001548  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  life.Channel   trans.Gender  trans.Channel  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     0.0003939      0.0080547      0.0068149  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constraints:     FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regularization:  TRUE </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Force the same coefficient to be used for both covariates</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.static.cov</span>, names.cov.constr <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span class="r-in">                   start.params.constr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Gender<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD with Static Covariates Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.static.cov, names.cov.constr = "Gender", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     start.params.constr = c(Gender = 0.5))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             r          alpha              a              b   life.Channel  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.64327       20.11566        0.05313        0.73089        1.22247  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> trans.Channel  constr.Gender  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.70163        1.38919  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constraints:     TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regularization:  FALSE </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Fit model only with the Channel covariate for life but</span></span>
<span class="r-in"><span class="co"># keep all trans covariates as is</span></span>
<span class="r-in"><span class="fu">bgnbd</span><span class="op">(</span><span class="va">clv.data.static.cov</span>, names.cov.life <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Channel"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimation finished!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BG/NBD with Static Covariates Model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bgnbd(clv.data = clv.data.static.cov, names.cov.life = c("Channel"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             r          alpha              a              b   life.Channel  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0.6408        19.7857         0.2107         2.8324         1.1492  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  trans.Gender  trans.Channel  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1.3801         0.7011  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT1: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> KKT2: TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constraints:     FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regularization:  FALSE </span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Bachmann, Niels Kuebler, Markus Meierer, Jeffrey Naef, Elliot Oblander, Patrik Schilter.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

