% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{pnbd_dyncov_pmf_per_customer}
\alias{pnbd_dyncov_pmf_per_customer}
\title{PNBD Dynamic Covariates PMF Per Customer}
\usage{
pnbd_dyncov_pmf_per_customer(
  dt.data.period.customer,
  dt.data.since.alive.all,
  x,
  a,
  b,
  r,
  s,
  t
)
}
\arguments{
\item{cov_period_life_exp}{Pre-computed exp(γ*X) for lifetime process in the period (u, tu]; sorted by date}

\item{cov_period_trans_exp}{Pre-computed exp(β*X) for transaction process in the period (u, tu]; sorted by date}

\item{cov_sincealive_life_exp}{Pre-computed exp(γ*X) for lifetime process from customer's first transaction; sorted by date}

\item{r_param}{Shape parameter r for the transaction rate gamma distribution}

\item{alpha_r_param}{Scale parameter α for the transaction rate gamma distribution}

\item{s_param}{Shape parameter s for the dropout rate gamma distribution}

\item{beta_s_param}{Scale parameter β for the dropout rate gamma distribution}

\item{x_double}{Number of transactions to calculate PMF for}

\item{t_r_param}{Time from start of period (u) to end of period (tu)}

\item{d1_param}{Fraction of time between first transaction and next covariate date}

\item{d_omega_param}{Fraction of time from u to next time unit}

\item{k0u_param}{Number of time units between customer's first transaction and beginning of period}

\item{ui_param}{Time between customer's first transaction and start of estimation period u}
}
\value{
The probability mass function value for the specified number of transactions
}
\description{
Calculate the probability mass function (PMF) for Pareto/NBD model with dynamic covariates for a single customer
}
\details{
The dynamic covariate Pareto/NBD model extends the standard model by allowing the transaction and 
dropout rates to vary over time according to time-varying covariates:

λ(t) = λ * exp(β*X(t)) for transaction rate
μ(t) = μ * exp(γ*X(t)) for dropout rate

Where:
- λ and μ are the base rates (linked to parameters r, α, s, β)
- β and γ are coefficient vectors for the covariates
- X(t) are time-varying covariates at time t

Formula structure follows PMF = S1 + S2, where:
- S1 represents probability for a customer who has not churned in period (u, t+u] and makes exactly x transactions
- S2 represents probability for a customer who has churned during period (u, t+u] and makes exactly x transactions
  (this is further decomposed into sums over all possible churn times and transaction patterns)
}
\keyword{internal}
